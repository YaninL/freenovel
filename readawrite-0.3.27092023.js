(()=>{const l=["ก","ข","ค","ฆ","ง","จ","ฉ","ช","ซ","ฌ","ญ","ฎ","ฏ","ฐ","ฑ","ฒ","ณ","ด","ต","ถ","ท","ธ","น","บ","ป","ผ","ฝ","พ","ฟ","ภ","ม","ย","ร","ฤ","ล","ว","ศ","ษ","ส","ห","ฬ","อ","ฮ","ฯ","ะ","ั","า","ำ","ิ","ี","ึ","ื","ุ","ู","ฺ","เ","แ","โ","ใ","ไ","ๆ","็","่","้","๊","๋","์","ํ","0๐","1๑","2๒","3๓","4๔","5๕","6๖","7๗","8๘","9๙"," "];var u=["ก","ข","ค","ฆ","ง","จ","ฉ","ช","ซ","ฌ","ญ","ฎ","ฏ","ฐ","ฑ","ฒ","ณ","ด","ต","ถ","ท","ธ","น","บ","ป","ผ","ฝ","พ","ฟ","ภ","ม","ย","ร","ฤ","ล","ว","ศ","ษ","ส","ห","ฬ","อ","ฮ"],s=e=>[].concat((e=>{if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)})(e)).map(function(e){var t=e.codePointAt(0);return 1040384<=t&&t<1046784?String.fromCharCode(t-983040^41):e}).join(""),d=(e,n)=>(e.map(e=>{var t=e.split(""),e=t.splice(0,1);n=n.replace(new RegExp(t.join("|"),"g"),e)}),n);document.addEventListener("DOMNodeInserted",function(){const e=document.querySelector("#articleContents")||!1;var t=document.querySelector("#ovr-intro")||!1;e&&0==t&&(e.innerHTML=d(u,e.innerHTML)+'<div id="ovr-intro"></div>')}),document.addEventListener("DOMNodeInserted",function(){var t=document.querySelector(".articleTableContent div.active .running_number");const n=document.querySelector("#articleNameInChapter")||!1,r=document.querySelector("#chapterContents")||!1,o=document.querySelector("#chapterNameInChapter")||!1;var e=document.querySelector("#contentArticle #imgLoadingCanvas, #chapterContents .showBlock")||!1,c=document.querySelector(".price_warning.button_purchase_chapter")||!1,i=document.querySelector("#ovr-content")||!1;if(o&&r&&0==e&&0==c&&0==i){c=s(r.innerHTML);const a=l[0].substr(1).split("");i=new RegExp(a.join("|")).test(c)?l:u,c=d(i,c).replace(/<\/?(span)[^>]*>/g,"");r.innerHTML='<div id="ovr-content" style="visibility: visible;" data-show="1">'+c+"</div>",r.querySelectorAll(".spoiler-content").forEach(e=>{e.style.display="block"});document.querySelector("#ovr-content");let e=o.textContent.trim();e=/(ตอนที่|บทที่)\s?:?\d+/i.exec(e)?e:t.textContent+" "+e;c=n.textContent.replace("เรื่อง : ","").substring(0,80).trim()+" - "+e,t=filenamify(c,{replacement:"-"})+".txt",c=cleanup(o.textContent.trim()+"\n"+r.innerText).replace(/\n/g,"\r\n\r\n"),c=new Blob([c],{type:"text/plain;charset=utf-8"});saveAs(c,t)}})})();
