<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta property="description" content="" />
<link rel="icon" type="image/png" sizes="16x16" href="asset/cat--v4.png" />
<link rel="stylesheet" href="asset/semantic.min.css" />
<link rel="stylesheet" href="asset/style.css" />
<script src="asset/jquery.min.js"></script>
<script src="asset/FileSaver.min.js"></script>
<title>Decrypt</title>
</head>
<body>

<div class="pusher">
<div class="page-header">
<div class="ui title container">
<h1>Decrypt dek-d, readawrite</h1>
</div>

<div class="ui one column grid page-header-menu">
<div class="ui attached secondary inverted menu computer only column">

</div>

</div>
<div class="shadow"></div>
</div>

<div class="ui container">

<table class="ui large blue tablet stackable padded table">
<thead><tr></tr></thead>
<tbody>
<tr>
<td class="collapsing">
  <div><textarea name=""  id="input" style="height: 500px;width:100%"></textarea></div>
</td>
</tr>
<tr>
<td class="collapsing center aligned">
  <button class="ui blue button" id="convert">Decrypt</button> <button class="ui blue button" id="save">Save</button> 
</td>
</tbody>
</table>

<div class="footer">
<div class="ui divider"></div>
<p><i>© 2021 Ann and contributors.<span class="info"></span></i></p>
</div>
</div>
</div>

<script>
  const decrypt = [
    'ก๥',
    'ข๦',
    'ค๨',
    'ฆ๪',
    'ง๫',
    'จ๬',
    'ฉ๭',
    'ช๮',
    'ซ๯',
    'ฌ๰',
    'ญ๱',
    'ฎ๲',
    'ฏ๳',
    'ฐ๴',
    'ฑ๵',
    'ฒ๶',
    'ณ๷',
    'ด๹',
    'ต',
    'ถ',
    'ท',
    'ธ',
    'น',
    'บ',
    'ป',
    'ผ',
    'ฝ',
    'พ',
    'ฟ',
    'ภ',
    'ม',
    'ย',
    'ร',
    'ฤ',
    'ล',
    'ว',
    'ศ',
    'ษ',
    'ส',
    'ห',
    'ฬ',
    'อ',
    'ฮ'
    ];

  $('#convert')[0].addEventListener('click', (e)=>{
    let inputText = $('#input')[0].value
    decrypt.forEach((charx)=>{
      let enChar = charx.split('');
      let thChar = enChar.splice(0, 1);
      inputText = inputText.replace(new RegExp(enChar.join('|'), 'g'), thChar)
    });
    $('#input')[0].value = inputText
  });

  $('#save')[0].addEventListener('click', (e)=>{
    let inputText = $('#input')[0].value;
    let filename = inputText.split('\n').filter(String)[0].trim();
    let blob = new Blob([inputText], {type: 'text/plain;charset=utf-8'});
    saveAs(blob, filename + '.txt')
  });
  </script>
</body>
</html>
