(()=>{let e=["ก","ข","ค","ฆ","ง","จ","ฉ","ช","ซ","ฌ","ญ","ฎ","ฏ","ฐ","ฑ","ฒ","ณ","ด","ต","ถ","ท","ธ","น","บ","ป","ผ","ฝ","พ","ฟ","ภ","ม","ย","ร","ฤ","ล","ว","ศ","ษ","ส","ห","ฬ","อ","ฮ","ฯ","ะ","ั","า","ำ","ิ","ี","ึ","ื","ุ","ู","ฺ","เ","แ","โ","ใ","ไ","ๆ","็","่","้","๊","๋","์","ํ","0๐","1๑","2๒","3๓","4๔","5๕","6๖","7๗","8๘","9๙"," "],t=["ก","ข","ค","ฆ","ง","จ","ฉ","ช","ซ","ฌ","ญ","ฎ","ฏ","ฐ","ฑ","ฒ","ณ","ด","ต","ถ","ท","ธ","น","บ","ป","ผ","ฝ","พ","ฟ","ภ","ม","ย","ร","ฤ","ล","ว","ศ","ษ","ส","ห","ฬ","อ","ฮ"],r=e=>{if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)},n=e=>[].concat(r(e)).map(function(e){var t=e.codePointAt(0);return 1040384<=t&&t<1046784?String.fromCharCode(t-983040^41):e}).join(""),o=(e,t)=>(e.map(e=>{var r=e.split(""),n=r.splice(0,1);t=t.replace(RegExp(r.join("|"),"g"),n)}),t);document.addEventListener("DOMNodeInserted",function(){let e=document.querySelector("#articleContents")||!1,r=document.querySelector("#ovr-intro")||!1;e&&!1==r&&(e.innerHTML=o(t,e.innerHTML)+'<div id="ovr-intro"></div>')}),document.addEventListener("DOMNodeInserted",function(){let r=document.querySelector("#chapterContents")||!1,i=document.querySelector("#chapterNameInChapter")||!1,c=document.querySelector("#contentArticle #imgLoadingCanvas, #chapterContents .showBlock")||!1,l=document.querySelector(".price_warning.button_purchase_chapter")||!1,a=document.querySelector("#ovr-content")||!1;if(i&&r&&!1==c&&!1==l&&!1==a){let s=n(r.innerHTML),p=e[0].substr(1).split(""),d=RegExp(p.join("|")).test(s),u=o(d?e:t,s).replace(/<\/?(span)[^>]*>/g,"");r.innerHTML='<div id="ovr-content" style="visibility: visible;" data-show="1">'+u+"</div>",r.querySelectorAll(".spoiler-content").forEach(e=>{e.style.display="block"}),document.querySelector("#ovr-content");let _=filenamify(i.textContent.trim(),{replacement:"-"})+".txt",v=cleanup(i.textContent.trim()+"\n"+r.textContent).replace(/\n/g,"\r\n\r\n"),y=new Blob([v],{type:"text/plain;charset=utf-8"});saveAs(y,_)}})})();
