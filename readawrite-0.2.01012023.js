(()=>{const a=["ก","ข","ค","ฆ","ง","จ","ฉ","ช","ซ","ฌ","ญ","ฎ","ฏ","ฐ","ฑ","ฒ","ณ","ด","ต","ถ","ท","ธ","น","บ","ป","ผ","ฝ","พ","ฟ","ภ","ม","ย","ร","ฤ","ล","ว","ศ","ษ","ส","ห","ฬ","อ","ฮ","ฯ","ะ","ั","า","ำ","ิ","ี","ึ","ื","ุ","ู","ฺ","เ","แ","โ","ใ","ไ","ๆ","็","่","้","๊","๋","์","ํ","0๐","1๑","2๒","3๓","4๔","5๕","6๖","7๗","8๘","9๙"," "];var l=["ก","ข","ค","ฆ","ง","จ","ฉ","ช","ซ","ฌ","ญ","ฎ","ฏ","ฐ","ฑ","ฒ","ณ","ด","ต","ถ","ท","ธ","น","บ","ป","ผ","ฝ","พ","ฟ","ภ","ม","ย","ร","ฤ","ล","ว","ศ","ษ","ส","ห","ฬ","อ","ฮ"],s=e=>[].concat((e=>{if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)})(e)).map(function(e){var t=e.codePointAt(0);return 1040384<=t&&t<1046784?String.fromCharCode(t-983040^41):e}).join(""),u=(e,n)=>(e.map(e=>{var t=e.split(""),e=t.splice(0,1);n=n.replace(new RegExp(t.join("|"),"g"),e)}),n);document.addEventListener("DOMNodeInserted",function(){const e=document.querySelector("#articleContents")||!1;var t=document.querySelector("#ovr-intro")||!1;e&&0==t&&(e.innerHTML=u(l,e.innerHTML)+'<div id="ovr-intro"></div>')}),document.addEventListener("DOMNodeInserted",function(){const e=document.querySelector("#articleNameInChapter")||!1,t=document.querySelector("#chapterContents")||!1,n=document.querySelector("#chapterNameInChapter")||!1;var r=document.querySelector("#contentArticle #imgLoadingCanvas, #chapterContents .showBlock")||!1,o=document.querySelector(".price_warning.button_purchase_chapter")||!1,c=document.querySelector("#ovr-content")||!1;if(n&&t&&0==r&&0==o&&0==c){o=s(t.innerHTML);const i=a[0].substr(1).split("");c=new RegExp(i.join("|")).test(o)?a:l,c=u(c,o).replace(/<\/?(span)[^>]*>/g,"");t.innerHTML='<div id="ovr-content" style="visibility: visible;" data-show="1">'+c+"</div>",t.querySelectorAll(".spoiler-content").forEach(e=>{e.style.display="block"});document.querySelector("#ovr-content");o=e.textContent.replace("เรื่อง : ","").substring(0,80).trim()+" - "+n.textContent.trim(),c=filenamify(o,{replacement:"-"})+".txt",o=cleanup(n.textContent.trim()+"\n"+t.textContent).replace(/\n/g,"\r\n\r\n"),o=new Blob([o],{type:"text/plain;charset=utf-8"});saveAs(o,c)}})})();
